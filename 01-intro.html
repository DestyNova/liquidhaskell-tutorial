<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <title>Programming with Refinement Types</title>

    <link href="./css/bootstrap.css" rel="stylesheet">
    <link href="./css/bootstrap-theme.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="./css/rust-book.css">
    <link rel="stylesheet" type="text/css" href="./css/editor.css">

   
    <style type="text/css">code{white-space: pre;}

      .dropdown-menu {
          min-width: 0px;
      }
      
      #checker-status {
          width: 30;
          height: 20;
          padding-top: 2px;
          padding-right: 10px;
          position: absolute;
          top: 0;
          right: 0;
          z-index:99;
      }
    </style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>


<!-- <script type="text/javascript" src="js/jquery/jquery-1.7.1.min.js"></script> -->
<script type="text/javascript" src="./js/jquery/jquery-2.0.3.min.js"></script>
<script type="text/javascript" src="./js/angular/angular.js"></script>
<script type="text/javascript" src="./js/bootstrap/bootstrap.js"></script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

</head>
<body class="rustdoc" data-spy="scroll" data-target=".bs-docs-sidebar" ng-app="liquidDemo" ng-controller="LiquidDemoCtrl">

    <div id="nav">
       <button id="toggle-nav" class="toggle-nav">
         <span class="sr-only">Toggle navigation</span>
         <span class="bar"></span>
         <span class="bar"></span>
         <span class="bar"></span>
       </button>
    </div>

<div id='toc' class='mobile-hidden'>
<ul class='chapter'>
<li><a href='01-intro.html'><b>1.</b>Introduction</a></li>
<ul class='section'>
<li><a href='01-intro.html#gowrong'><b>1.1.</b> Well-Typed Programs Do Go Wrong</a></li>
<li><a href='01-intro.html#refinement-types'><b>1.2.</b> Refinement Types</a></li>
<li><a href='01-intro.html#audience'><b>1.3.</b> Audience</a></li>
<li><a href='01-intro.html#getting-started'><b>1.4.</b> Getting Started</a></li>
<li><a href='01-intro.html#sample-code'><b>1.5.</b> Sample Code</a></li>
</ul>
<li><a href='02-logic.html'><b>2.</b>Logic &amp; SMT</a></li>
<ul class='section'>
<li><a href='02-logic.html#syntax'><b>2.1.</b> Syntax</a></li>
<li><a href='02-logic.html#semantics'><b>2.2.</b> Semantics</a></li>
<li><a href='02-logic.html#verification-conditions'><b>2.3.</b> Verification Conditions</a></li>
<li><a href='02-logic.html#examples-propositions'><b>2.4.</b> Examples: Propositions</a></li>
<li><a href='02-logic.html#examples-arithmetic'><b>2.5.</b> Examples: Arithmetic</a></li>
<li><a href='02-logic.html#examples-uninterpreted-function'><b>2.6.</b> Examples: Uninterpreted Function</a></li>
<li><a href='02-logic.html#recap'><b>2.7.</b> Recap</a></li>
</ul>
<li><a href='03-basic.html'><b>3.</b>Refinement Types</a></li>
<ul class='section'>
<li><a href='03-basic.html#definetype'><b>3.1.</b> Defining Types</a></li>
<li><a href='03-basic.html#errors'><b>3.2.</b> Errors</a></li>
<li><a href='03-basic.html#subtyping'><b>3.3.</b> Subtyping</a></li>
<li><a href='03-basic.html#writing-specifications'><b>3.4.</b> Writing Specifications</a></li>
<li><a href='03-basic.html#refining-function-types-pre-conditions'><b>3.5.</b> Refining Function Types: Pre-conditions</a></li>
<li><a href='03-basic.html#refining-function-types-post-conditions'><b>3.6.</b> Refining Function Types: Post-conditions</a></li>
<li><a href='03-basic.html#testing-values-booleans-and-propositions'><b>3.7.</b> Testing Values: Booleans and Propositions</a></li>
<li><a href='03-basic.html#putting-it-all-together'><b>3.8.</b> Putting It All Together</a></li>
<li><a href='03-basic.html#recap'><b>3.9.</b> Recap</a></li>
</ul>
<li><a href='04-poly.html'><b>4.</b>Polymorphism</a></li>
<ul class='section'>
<li><a href='04-poly.html#vectorbounds'><b>4.1.</b> Specification: Vector Bounds</a></li>
<li><a href='04-poly.html#verification-vector-lookup'><b>4.2.</b> Verification: Vector Lookup</a></li>
<li><a href='04-poly.html#inference-our-first-recursive-function'><b>4.3.</b> Inference: Our First Recursive Function</a></li>
<li><a href='04-poly.html#higher-order-functions-bottling-recursion-in-a-loop'><b>4.4.</b> Higher-Order Functions: Bottling Recursion in a <code>loop</code></a></li>
<li><a href='04-poly.html#sparsetype'><b>4.5.</b> Refinements and Polymorphism</a></li>
<li><a href='04-poly.html#recap'><b>4.6.</b> Recap</a></li>
</ul>
<li><a href='05-datatypes.html'><b>5.</b>Refined Datatypes</a></li>
<ul class='section'>
<li><a href='05-datatypes.html#autosmart'><b>5.1.</b> Sparse Vectors Revisited</a></li>
<li><a href='05-datatypes.html#orderedlists'><b>5.2.</b> Ordered Lists</a></li>
<li><a href='05-datatypes.html#binarysearchtree'><b>5.3.</b> Ordered Trees</a></li>
<li><a href='05-datatypes.html#recap'><b>5.4.</b> Recap</a></li>
</ul>
<li><a href='06-measure-bool.html'><b>6.</b>Boolean Measures</a></li>
<ul class='section'>
<li><a href='06-measure-bool.html#partial-functions'><b>6.1.</b> Partial Functions</a></li>
<li><a href='06-measure-bool.html#usingmeasures'><b>6.2.</b> Lifting Functions to Measures</a></li>
<li><a href='06-measure-bool.html#recap'><b>6.3.</b> Recap</a></li>
</ul>
<li><a href='07-measure-int.html'><b>7.</b>Numeric Measures</a></li>
<ul class='section'>
<li><a href='07-measure-int.html#wholemeal-programming'><b>7.1.</b> Wholemeal Programming</a></li>
<li><a href='07-measure-int.html#specifying-list-dimensions'><b>7.2.</b> Specifying List Dimensions</a></li>
<li><a href='07-measure-int.html#lists-size-preserving-api'><b>7.3.</b> Lists: Size Preserving API</a></li>
<li><a href='07-measure-int.html#listreducing'><b>7.4.</b> Lists: Size Reducing API</a></li>
<li><a href='07-measure-int.html#dimension-safe-vector-api'><b>7.5.</b> Dimension Safe Vector API</a></li>
<li><a href='07-measure-int.html#dimension-safe-matrix-api'><b>7.6.</b> Dimension Safe Matrix API</a></li>
<li><a href='07-measure-int.html#recap'><b>7.7.</b> Recap</a></li>
</ul>
<li><a href='08-measure-sets.html'><b>8.</b>Elemental Measures</a></li>
<ul class='section'>
<li><a href='08-measure-sets.html#talking-about-sets'><b>8.1.</b> Talking about Sets</a></li>
<li><a href='08-measure-sets.html#quickcheck'><b>8.2.</b> Proving QuickCheck Style Properties</a></li>
<li><a href='08-measure-sets.html#listelems'><b>8.3.</b> Content-Aware List API</a></li>
<li><a href='08-measure-sets.html#permutations'><b>8.4.</b> Permutations</a></li>
<li><a href='08-measure-sets.html#uniqueness'><b>8.5.</b> Uniqueness</a></li>
<li><a href='08-measure-sets.html#unique-zippers'><b>8.6.</b> Unique Zippers</a></li>
<li><a href='08-measure-sets.html#recap'><b>8.7.</b> Recap</a></li>
</ul>
<li><a href='09-case-study-lazy-queues.html'><b>9.</b>Case Study: Okasaki's Lazy Queues</a></li>
<ul class='section'>
<li><a href='09-case-study-lazy-queues.html#queues'><b>9.1.</b> Queues</a></li>
<li><a href='09-case-study-lazy-queues.html#sized-lists'><b>9.2.</b> Sized Lists</a></li>
<li><a href='09-case-study-lazy-queues.html#queue-type'><b>9.3.</b> Queue Type</a></li>
<li><a href='09-case-study-lazy-queues.html#queue-operations'><b>9.4.</b> Queue Operations</a></li>
<li><a href='09-case-study-lazy-queues.html#recap'><b>9.5.</b> Recap</a></li>
</ul>
<li><a href='10-case-study-associative-maps.html'><b>10.</b>Case Study: Associative Maps</a></li>
<ul class='section'>
<li><a href='10-case-study-associative-maps.html#mapapi'><b>10.1.</b> Specifying Maps</a></li>
<li><a href='10-case-study-associative-maps.html#using-maps-well-scoped-expressions'><b>10.2.</b> Using Maps: Well Scoped Expressions</a></li>
<li><a href='10-case-study-associative-maps.html#lemmas'><b>10.3.</b> Implementing Maps: Binary Search Trees</a></li>
<li><a href='10-case-study-associative-maps.html#recap'><b>10.4.</b> Recap</a></li>
</ul>
<li><a href='11-case-study-pointers.html'><b>11.</b>Case Study: Pointers &amp; Bytes</a></li>
<ul class='section'>
<li><a href='11-case-study-pointers.html#heartbleeds-in-haskell'><b>11.1.</b> HeartBleeds in Haskell</a></li>
<li><a href='11-case-study-pointers.html#low-level-pointer-api'><b>11.2.</b> Low-level Pointer API</a></li>
<li><a href='11-case-study-pointers.html#a-refined-pointer-api'><b>11.3.</b> A Refined Pointer API</a></li>
<li><a href='11-case-study-pointers.html#assumptions-vs-guarantees'><b>11.4.</b> Assumptions vs Guarantees</a></li>
<li><a href='11-case-study-pointers.html#bytestring-api'><b>11.5.</b> ByteString API</a></li>
<li><a href='11-case-study-pointers.html#nested-bytestrings'><b>11.6.</b> Nested ByteStrings</a></li>
</ul>
<li><a href='12-case-study-AVL.html'><b>12.</b>Case Study: AVL Trees</a></li>
<ul class='section'>
<li><a href='12-case-study-AVL.html#avl-trees'><b>12.1.</b> AVL Trees</a></li>
<li><a href='12-case-study-AVL.html#specifying-avl-trees'><b>12.2.</b> Specifying AVL Trees</a></li>
<li><a href='12-case-study-AVL.html#smart-constructors'><b>12.3.</b> Smart Constructors</a></li>
<li><a href='12-case-study-AVL.html#inserting-elements'><b>12.4.</b> Inserting Elements</a></li>
<li><a href='12-case-study-AVL.html#rebalancing-trees'><b>12.5.</b> Rebalancing Trees</a></li>
<li><a href='12-case-study-AVL.html#refactoring-rebalance'><b>12.6.</b> Refactoring Rebalance</a></li>
<li><a href='12-case-study-AVL.html#deleting-elements'><b>12.7.</b> Deleting Elements</a></li>
<li><a href='12-case-study-AVL.html#functional-correctness'><b>12.8.</b> Functional Correctness</a></li>
</ul>
</ul>

</div>
      
       <div id="checker-status">
         <!-- Verifying ... -->
         <button class="btn btn-xs btn-link actbutton" type="button" style="font-size:30px; z-index:1"
                ng-show="isChecking" ng-click="verifySource()">
          <span class="glyphicon glyphicon-hourglass"></span>
         </button>

        
         <!-- Safe -->
         <button class="btn btn-xs btn-link actbutton" type="button" style="font-size:30px; color:green; z-index:1"
                 ng-show="isSafe">
           <span class="glyphicon glyphicon-ok"></span>
         </button>

         <div class="dropdown" ng-show="isBad">
             <button class="btn btn-xs btn-link dropdown-toggle"
                     type="button"
                     id="errorblockdropdown"
                     data-toggle="dropdown"
                     style="font-size:30px; color:red; z-index:1">
               <span class="glyphicon glyphicon-remove" style="vertical-align:middle"></span><font size="4">{{errorBlocks.length}}</font>
               </span>
             </button>
             <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
               <li ng-repeat="err in errorBlocks">
                 <a tabindex="-1" ng-href="#program-{{err.data}}">{{err.index}}</a>
               </li>
             </ul>
         </div>
       </div>
       

<div id='page-wrapper'>
<div id='page'>

<section id="intro" class="level1">
<h1>Introduction</h1>
<div class="hidden">
<div id="program-pane-0" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-0" class="programbox">module Introduction where
main = putStrLn "Intro"
</div>
</div>

</div>

<p>One of the great things about Haskell is its brainy type system that allows one to enforce a variety of invariants at compile time, thereby nipping in the bud a large swathe of run-time <a href="#getting-started">errors</a>.</p>
<section id="gowrong" class="level2">
<h2>Well-Typed Programs Do Go Wrong</h2>
<p>Alas, well-typed programs <em>do</em> go quite wrong, in a variety of ways.</p>
<p><br /><strong>Division by Zero</strong> This innocuous function computes the average of a list of integers:</p>
<div id="program-pane-1" class="welleditor" style="background:#fff; position:relative">

  <!-- Verify Source -->
  <button class="btn btn-xs btn-link actbutton" type="button" style="z-index:1"
          ng-show="isUnknown" ng-click="verifySource()">
    <span class="glyphicon glyphicon-play"></span>
  </button>
 
  <div id="program-1" class="programbox">average    :: [Int] -> Int
average xs = sum xs `div` length xs</div>
</div>

<p>We get the desired result on a non-empty list of numbers:</p>
<pre class="ghci"><code>ghci&gt; average [10, 20, 30, 40]
25</code></pre>
<p>However, if we call it with an empty list, we get a rather unpleasant crash: <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></p>
<pre class="ghci"><code>ghci&gt; average []
*** Exception: divide by zero</code></pre>
<p><br /><strong>Missing Keys</strong> Associative key-value maps are the new lists; they come &quot;built-in&quot; with modern languages like Go, Python, JavaScript and Lua; and of course, they're widely used in Haskell too.</p>
<pre class="ghci"><code>ghci&gt; :m +Data.Map 
ghci&gt; let m = fromList [ (&quot;haskell&quot;, &quot;lazy&quot;)
                       , (&quot;ocaml&quot;  , &quot;eager&quot;)]

ghci&gt; m ! &quot;haskell&quot;
&quot;lazy&quot;</code></pre>
<p>Alas, maps are another source of vexing errors that are tickled when we try to find the value of an absent key: <a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<pre class="ghci"><code>ghci&gt; m ! &quot;javascript&quot;
&quot;*** Exception: key is not in the map</code></pre>
<p><br /><strong>Segmentation Faults</strong> Say what? How can one possibly get a segmentation fault with a <em>safe</em> language like Haskell. Well, here's the thing: every safe language is built on a foundation of machine code, or at the very least, <code>C</code>. Consider the ubiquitous <code>vector</code> library:</p>
<pre class="ghci"><code>ghci&gt; :m +Data.Vector 
ghci&gt; let v = fromList [&quot;haskell&quot;, &quot;ocaml&quot;]
ghci&gt; unsafeIndex v 0
&quot;haskell&quot;</code></pre>
<p>However, invalid inputs at the safe upper levels can percolate all the way down and stir a mutiny down below: <a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a></p>
<pre class="ghci"><code>ghci&gt; unsafeIndex v 3
&#39;ghci&#39; terminated by signal SIGSEGV ...</code></pre>
<p><br /><strong>Heart Bleeds</strong> Finally, for certain kinds of programs, there is a fate worse than death. <code>text</code> is a high-performance string processing library for Haskell, that is used, for example, to build web services.</p>
<pre class="ghci"><code>ghci&gt; :m + Data.Text Data.Text.Unsafe 
ghci&gt; let t = pack &quot;Voltage&quot;
ghci&gt; takeWord16 5 t
&quot;Volta&quot;</code></pre>
<p>A cunning adversary can use invalid, or rather, <em>well-crafted</em>, inputs that go well outside the size of the given <code>text</code> to read extra bytes and thus <em>extract secrets</em> without anyone being any the wiser.</p>
<pre class="ghci"><code>ghci&gt; takeWord16 20 t
&quot;Voltage\1912\3148\SOH\NUL\15928\2486\SOH\NUL&quot;</code></pre>
<p>The above call returns the bytes residing in memory <em>immediately after</em> the string <code>Voltage</code>. These bytes could be junk, or could be either the name of your favorite TV show, or, more worryingly, your bank account password.</p>
</section>
<section id="refinement-types" class="level2">
<h2>Refinement Types</h2>
<p>Refinement types allow us to enrich Haskell's type system with <em>predicates</em> that precisely describe the sets of <em>valid</em> inputs and outputs of functions, values held inside containers, and so on. These predicates are drawn from special <em>logics</em> for which there are fast <em>decision procedures</em> called SMT solvers.</p>
<p><br /><strong>By combining types with predicates</strong> you can specify <em>contracts</em> which describe valid inputs and outputs of functions. The refinement type system <em>guarantees at compile-time</em> that functions adhere to their contracts. That is, you can rest assured that the above calamities <em>cannot occur at run-time</em>.</p>
<p><br /><strong>LiquidHaskell</strong> is a Refinement Type Checker for Haskell, and in this tutorial we'll describe how you can use it to make programs better and programming even more fun. <a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a></p>
</section>
<section id="audience" class="level2">
<h2>Audience</h2>
<p>Do you</p>
<ul>
<li>know a bit of basic arithmetic and logic?</li>
<li>know the difference between a <code>nand</code> and an <code>xor</code>?</li>
<li>know any typed languages e.g. ML, Haskell, Scala, F# or (Typed) Racket?</li>
<li>know what <code>forall a. a -&gt; a</code> means?</li>
<li>like it when your code editor politely points out infinite loops?</li>
<li>like your programs to not have bugs?</li>
</ul>
<p>Then this tutorial is for you!</p>
</section>
<section id="getting-started" class="level2">
<h2>Getting Started</h2>
<p>First things first; lets see how to install and run LiquidHaskell.</p>
<p><br /><strong>LiquidHaskell Requires</strong> (in addition to the cabal dependencies) binary for an <code>SMTLIB2</code> compatible solver, e.g. one of</p>
<ul>
<li><a href="http://z3.codeplex.com/">Z3</a></li>
<li><a href="http://cvc4.cs.nyu.edu/">CVC4</a></li>
<li><a href="http://mathsat.fbk.eu/download.html">MathSat</a></li>
</ul>
<p><br /><strong>To Install</strong> LiquidHaskell, just do:</p>
<pre class="sh"><code>$ cabal install liquidhaskell</code></pre>
<p><br /><strong>Command Line</strong> execution simply requires you type:</p>
<pre class="sh"><code>$ liquid /path/to/file.hs</code></pre>
<p>You will see a report of <code>SAFE</code> or <code>UNSAFE</code> together with type errors at various points in the source.</p>
<p><br /><strong>Emacs and Vim</strong> have LiquidHaskell plugins, which run <code>liquid</code> in the background as you edit any Haskell file, highlight errors, and display the inferred types, all of which we find to be extremely useful. Hence we <strong>strongly recommend</strong> these over the command line option.</p>
<ul>
<li>Emacs' <code>flycheck</code> plugin is described <a href="https://github.com/ucsd-progsys/liquid-types.el">here</a></li>
<li>Vim's <code>syntastic</code> checker is described <a href="https://github.com/ucsd-progsys/liquid-types.vim">here</a></li>
</ul>
</section>
<section id="sample-code" class="level2">
<h2>Sample Code</h2>
<p>This tutorial is written in literate Haskell and the code for it is available <a href="http://github.com/ucsd-progsys/liquidhaskell-tutorial.git">here</a>. We <em>strongly</em> recommend you grab the code, and follow along, and especially that you do the exercises.</p>
<pre class="sh"><code>$ git clone https://github.com/ucsd-progsys/liquidhaskell-tutorial.git
$ cd liquidhaskell-tutorial/src</code></pre>
<p><strong>Note:</strong> This tutorial is a <em>work in progress</em>, and we will be <strong>very</strong> grateful for feedback and suggestions, ideally via pull-requests on github.</p>
<p>Lets begin!</p>
</section>
</section>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>We could write <code>average</code> more <em>defensively</em>, returning a <code>Maybe</code> or <code>Either</code> value. However, this merely kicks the can down the road. Ultimately, we will want to extract the <code>Int</code> from the <code>Maybe</code> and if the inputs were invalid to start with, then at that point we'd be stuck.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Again, one could use a <code>Maybe</code> but its just deferring the inevitable.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Why use a function marked <code>unsafe</code>? Because it's very fast! Furthermore, even if we used the safe variant, we'd get a <em>run-time</em> exception which is only marginally better. Finally, we should remember to thank the developers for carefully marking it unsafe, because in general, given the many layers of abstraction, it is hard to know which functions are indeed safe.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>If you are familiar with the notion of Dependent Types, for example, as in the Coq proof assistant, then Refinement Types can be thought of as restricted class of the former where the logic is restricted, at the cost of expressiveness, but with the reward of a considerable amount of automation.<a href="#fnref4">↩</a></p></li>
</ol>
</section>

</div>
</div>

<!-- JavaScript below! ============================================== -->

  <script src="./js/ace/ace.js" type="text/javascript" charset="utf-8"></script> 
  <script src="./js/ace/theme-monokai.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/ace/mode-haskell.js"  type="text/javascript" charset="utf-8"></script>
  <script src="./js/liquid/tooltip.js"></script> 
  <script src="./js/liquid/annot.js"></script> 
  <script src="./js/liquid/config.js"></script> 
  <script src="./js/liquid/liquid.js"></script>

  <script type="text/javascript">
    var queryServerURL = "http://goto.ucsd.edu:8090/" ;
  </script>
  
  <!-- rust nav JS --> 
  <script type="text/javascript">
    window.playgroundUrl = "";
  </script>
  
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {

 document.getElementById("toggle-nav").onclick = toggleNav;

  function toggleNav() {
    var toc         = document.getElementById("toc");
    var pagewrapper = document.getElementById("page-wrapper");
    var status      = document.getElementById("checker-status");

    toggleClass(toc,         "mobile-hidden");
    // toggleClass(status,      "mobile-hidden");
    toggleClass(pagewrapper, "mobile-hidden");
  };

  function toggleClass(el, className) {
     // from http://youmightnotneedjquery.com/
     if (el.classList) {
       el.classList.toggle(className);
     } else {
       var classes = el.className.split(' ');
       var existingIndex = classes.indexOf(className);

       if (existingIndex >= 0) {
         classes.splice(existingIndex, 1);
       } else {
         classes.push(className);
       }
       el.className = classes.join(' ');
     }
  }
});
</script>
</body>
</html>
